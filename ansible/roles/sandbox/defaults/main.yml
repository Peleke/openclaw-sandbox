---
# Sandbox Role Defaults

# Master switch - sandbox follows docker_enabled
sandbox_enabled: "{{ docker_enabled | default(true) | bool }}"

# Sandbox mode: off | non-main | all
# "all" = sandbox every session (aggressive, good for hardened VM)
sandbox_mode: "all"

# Sandbox scope: session | agent | shared
sandbox_scope: "session"

# Workspace access from inside container: none | ro | rw
sandbox_workspace_access: "rw"

# Sandbox image name (OpenClaw default)
sandbox_image: "openclaw-sandbox:bookworm-slim"

# Build browser sandbox image too (heavier, optional)
sandbox_build_browser: false

# Docker network mode for sandbox containers: bridge | host | none
# "none" = air-gapped containers, maximum isolation (secure default)
# "bridge" = standard Docker networking (container can reach internet)
sandbox_docker_network: "none"

# Per-tool network routing (dual-container architecture)
# Tools listed here run in a separate network-enabled container.
# All other tools stay in the isolated (network: none) container.
# Override with [] to disable dual-container routing entirely.
sandbox_network_allow:
  - "web_fetch"
  - "web_search"

# Operator-defined tools to append to the network allow list.
# Merged with sandbox_network_allow at config injection time.
# Example: ["browser"] to give the browser tool network access
sandbox_network_allow_extra: []

# Command prefixes routed to the network container when invoked via exec.
# Only these commands get bridge networking; all other exec stays air-gapped.
sandbox_network_exec_allow:
  - "gh"

# Operator-defined command prefixes to append to networkExecAllow.
sandbox_network_exec_allow_extra: []

# Network mode for the network-enabled container
# Only used when sandbox_network_allow or sandbox_network_exec_allow is non-empty
sandbox_network_docker_network: "bridge"

# OpenClaw sandbox-setup.sh location (relative to workspace)
sandbox_setup_script: "scripts/sandbox-setup.sh"

# Obsidian vault bind mount for sandbox containers
sandbox_vault_path: "/workspace-obsidian"
sandbox_vault_access: "rw"
